# TEBCC v6 route specification
This file describes how routes need to be formatted for the tracker. The tracker takes in only .tsv files, and they need to be formatted to this spec.

Some fields in these .tsv files are for our usage, but some are required to be a certain format.

# Format
| Data Row     | Unix Arrival (Arrival) | Unix Arrival (Centered) | Unix Arrival (departure) | Pretty Arrival    | City                                                                 | Region                                         | Country Code                                                                                                       | Locale                                                                                    | Baskets Delivered | Carrots Eaten | Latitude      | Longitude     | Population Number | Population Year                                             | Elevation                               | Arrival Stoppage Time                                                                                                                                                      | Timezone                                        | Wikipedia src link                                          | Wikipedia description           |
|--------------|------------------------|-------------------------|--------------------------|-------------------|----------------------------------------------------------------------|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|-------------------|---------------|---------------|---------------|-------------------|-------------------------------------------------------------|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|-------------------------------------------------------------|---------------------------------|
| Column: 0    | Column: 1              | Column: 2               | Column: 3                | Column: 4         | Column: 5                                                            | Column: 6                                      | Column: 7                                                                                                          | Column: 8                                                                                 | Column: 9         | Column: 10    | Column: 11    | Column: 12    | Column: 13        | Column: 14                                                  | Column: 15                              | Column: 16                                                                                                                                                                 | Column: 17                                      | Column: 18                                                  | Column: 19                      |
| Required? no | Required? yes          | Required? yes           | Required? yes            | Required? no      | Required? yes                                                        | Required? yes                                  | Required? yes, for non-PT stops.                                                                                   | Required? yes                                                                             | Required? yes     | Required? yes | Required? yes | Required? yes | Required? yes     | Required? yes                                               | Required? yes                           | Required? no                                                                                                                                                               | Required? yes                                   | Required? yes, for non-PT stops                             | Required? yes, for non-PT stops |
| Type: N/A    | Type: int              | Type: int               | Type: int                | Type: N/A         | Type: string                                                         | Type: string. Use `pt` for pre-tracking stops. | Type: String as ISO-3166-alpha-2 country code. Acceptable country code list is here: https://flagicons.lipis.dev/. | Type: String as Unicode locale string. Set to None/en-US if there's no applicable locale. | Type: int         | Type: int     | Type: float   | Type: float   | Type: int         | Type: int. Set to 0 to hide population year in the tracker. | Type: int as meters. floats *may* work. | See the formulas section for the formula used to generate this. | Type: String as valid IATA timezone identifier. | Type: String as a link to the Wikipedia article for a stop. | Type: string                    |
| 0            | 1680933600             | 1680933600              | 1680933600               | 4/8/2023 2:00:00  | Easter Bunny's House - The Easter Bunny has awoken from a long rest! | pt                                             |                                                                                                                    | en-US                                                                                     | 0                 | 0             | -27.1044228   | -109.2489683  | 0                 | 0                                                           | 0                                       | 0                                                                                                                                                                          | Pacific/Easter                                  |                                                             |                                 |
| 1            | 1681011587             | 1681011600              | 1681011613               | 4/8/2023 23:40:00 | New York                                                             | New York, United States                        | us                                                                                                                 | en-US                                                                                     | 5683054848        | 51373621      | 40.75604      | -73.986941    | 8804190           | 2020                                                        | 10                                      | 26                                                                                                                                                                         | America/New_York                                | https://en.wikipedia.org/wiki/New_York_City                 | The Wikipedia Description...    |

# A couple notes about the route
Included is the route.tsv file that was used for 2023. Because it's in TSV format, there's a few missing formulas. Here are the formulas for each column.

## Column 1 - Unix Arrival Arrival Time
`<col 2 cur stop> - <col 16 cur stop> / 2`

## Column 3 - Unix Departure Time
`<col 2 cur stop> + <col 16 cur stop> / 2`

## Column 9 - Baskets Delivered
`<col 9 prev stop> + ((RANDBETWEEN(<ctrl low> * 10000, <ctrl high> * 10000) / 10000) * <col 13 cur stop>) + RANDBETWEEN(<any% low>, <any% high>)`

ctrl low, ctrl high, any% low, and any% high are defined at U5, U7, U13, and U15.

## Column 10 - Carrots eaten
`<col 10 prev stop> + ((<col 9 cur stop> - <col 9 prev stop>) / RANDBETWEEN(<basket low>, <basket high>))`

basket low and basket high are defined at U9 and U11.

# Column 16 - Arrival Stoppage Time
`ROUND(((<col 2 cur stop> - <col 2 prev stop>) / 10) + LOG((<col 13 cur stop>/750 + 1), 2))`

# Note about a countdown stop at the top
For v6, it's mandatory that your first stop be a countdown stop to figure out which route state that it's in. See the example route.tsv for how this should be done.